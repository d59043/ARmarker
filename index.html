<!DOCTYPE html>

<html>

<head>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></scriot>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <meta charset="UTF-8">

  <title>WEBAR Confirmation with Trench Image</title>

  <style>

    /* スタイルシート */

    #confirmation-box {

      background-color: white;

      padding: 20px;

      border-radius: 5px;

      text-align: center;

    }

  </style>

</head>

<body>
  <!-- A-FrameにAR.jsを紐づけ、VRボタン非表示、深度バッファ追加 -->
    <a-scene embedded arjs vr-mode-ui="enabled: false;" renderer="logarithmicDepthBuffer: true;">

  <!-- AR.js マーカーの設定 -->

  <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">

    <a-marker preset="hiro">

      <!-- マーカーが検出されたら表示されるオーバーレイ -->

      <a-entity id="confirmation-overlay">

        <div id="confirmation-box">

          <h2>確認してください</h2>

          <button onclick="showTrenchImage()">確認</button>

          <img id="trench-image" src="model1.glb" alt="掩体壕の画像" style="display: none;">

        </div>

      </a-entity>

    </a-marker>

    <a-entity camera></a-entity>

  </a-scene>



  <script>

    // マーカーが検出されたら確認画面を表示する処理

    AFRAME.registerComponent('markerhandler', {

      init: function() {

        var marker = this.el;



        marker.addEventListener('markerFound', function() {

          // マーカーが検出されたらオーバーレイを表示

          var overlay = document.getElementById('confirmation-overlay');

          overlay.style.display = 'flex';

        });



        marker.addEventListener('markerLost', function() {

          // マーカーが見失われたらオーバーレイを非表示

          var overlay = document.getElementById('confirmation-overlay');

          overlay.style.display = 'none';

        });

      }

    });



    // 確認ボタンがクリックされたら掩体壕の画像を表示する処理

    function showTrenchImage() {

      var trenchImage = document.getElementById('trench-image');

      trenchImage.style.display = 'block';

    }

  </script>

</body>

</html>
